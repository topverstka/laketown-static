<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lake Town</title>
  <link rel="stylesheet" href="css/app.min.css">
<!--   <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"
  />
 -->  
</head>
<body>

@@include('../parts/header_main/template.html')

@@include('../parts/banner/template.html')

@@include('../parts/advantages/template.html')
@@include('../parts/buildingPosition/template.html')
@@include('../parts/map/template.html')

@@include('../parts/chooseAppt/template.html')

@@include('../parts/parking/template.html')

@@include('../parts/buyingServices/template.html')

@@include('../parts/buildingStage/template.html')
@@include('../parts/news/template.html')

@@include('../parts/callBack/template.html')


@@include('../parts/footer/template.html')





</body>
<!-- Подключаем скрипты проекта -->
<script src="https://api-maps.yandex.ru/2.1/?apikey=1237ee06-9b81-4c5d-ab46-7f603fba55df&lang=ru_RU" type="text/javascript"></script>
<script src="js/aos.js"></script>
<script src="js/app.min.js"></script>
<script src="js/swiper-bundle.min.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script> -->
<script type="text/javascript">


  const buyingServicesCarousel = new Swiper('#buyingServices .swiper', {
    speed: 400,
    slidesPerView: 2,
    spaceBetween: 20,
    breakpointBase: 'container',
    height: 700,
    oneWayMovement: false,
    // loop: true,
    navigation: {
      nextEl: '#buyingServices .services-btn-next',
      prevEl: '#buyingServices .services-btn-prev',
    },
    pagination: {
      el: "#buyingServices .swiper-pagination",
      clickable: true,
    },
    breakpoints: {
      // when window width is >= 320px
      577: {
        height: 500,
        slidesPerView: 2.5,
      },
      769: {
        pagination: false,
      },
      1200: {
        height: 600,
        slidesPerView: 2.5,
        spaceBetween: 40
      },
      1441: {
        height: 700,
        slidesPerView: 3.3,
        spaceBetween: 40
      }
    }
  });

  // filter appt
  filterShow.onclick = function() {
    apptFilter.classList.add('active');
    filterShow.classList.add('d-none');
    filterHide.classList.remove('d-none');
  }

  filterHide.onclick = function() {
    apptFilter.classList.remove('active');
    filterShow.classList.remove('d-none');
    filterHide.classList.add('d-none');
  }

  filterApply.onclick = function() {
    apptFilter.classList.remove('active');
    filterShow.classList.remove('d-none');
    filterHide.classList.add('d-none');
  }


  filterClear.onclick = function() {
    apptFilter.classList.remove('active');
    filterShow.classList.remove('d-none');
    filterHide.classList.add('d-none');
  }




  try {
    // Функция ymaps.ready() будет вызвана, когда
    // загрузятся все компоненты API, а также когда будет готово DOM-дерево.
    ymaps.ready(init);
  } catch {
    console.warn('Can not load ymaps')
  }
  function init(){

    const companyLogo = `${window.location.href}img/laketown.svg`
    const pharmacyLogo = `${window.location.href}img/pharmacy.svg`

    // Создаём макет содержимого.
    MyIconContentLayout = ymaps.templateLayoutFactory.createClass(
      '<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'
    );

    var myMap = new ymaps.Map("map", {
      center: [55.76, 37.64],
      zoom: 7
    });

    var myCircle = new ymaps.Circle([
        // Координаты центра круга.
        [55.76, 37.60],
        // Радиус круга в метрах.
        3000
    ], {
        // Описываем свойства круга.
        // Содержимое балуна.
        balloonContent: "3 км",
        // Содержимое хинта.
        hintContent: "30 минут"
    }, {
        // Задаем опции круга.
        // Включаем возможность перетаскивания круга.
        draggable: false,
        // Цвет заливки.
        // Последний байт (77) определяет прозрачность.
        // Прозрачность заливки также можно задать используя опцию "fillOpacity".
        
        fillColor: "#d6915340",
        // Цвет обводки.
        strokeColor: "#D69153",
        // Прозрачность обводки.
        strokeOpacity: 0.8,
        // Ширина обводки в пикселях.
        strokeWidth: 2
    });

    var myCircle2 = new ymaps.Circle([
        // Координаты центра круга.
        [55.76, 37.60],
        // Радиус круга в метрах.
        1500
    ], {
        // Описываем свойства круга.
        // Содержимое балуна.
        balloonContent: "1.5 км",
        // Содержимое хинта.
        hintContent: "15 минут"
    }, {
        // Задаем опции круга.
        // Включаем возможность перетаскивания круга.
        draggable: false,
        // Цвет заливки.
        // Последний байт (77) определяет прозрачность.
        // Прозрачность заливки также можно задать используя опцию "fillOpacity".
        
        fillColor: "#d6915340",
        // Цвет обводки.
        strokeColor: "#D69153",
        // Прозрачность обводки.
        strokeOpacity: 0.8,
        // Ширина обводки в пикселях.
        strokeWidth: 2
    });

    var myCircle3 = new ymaps.Circle([
        // Координаты центра круга.
        [55.76, 37.60],
        // Радиус круга в метрах.
        500
    ], {
        // Описываем свойства круга.
        // Содержимое балуна.
        balloonContent: "500 м",
        // Содержимое хинта.
        hintContent: "5 минут"
    }, {
        // Задаем опции круга.
        // Включаем возможность перетаскивания круга.
        draggable: false,
        // Цвет заливки.
        // Последний байт (77) определяет прозрачность.
        // Прозрачность заливки также можно задать используя опцию "fillOpacity".
        
        fillColor: "#d6915340",
        // Цвет обводки.
        strokeColor: "#D69153",
        // strokeColor: "#D69153",
        // Прозрачность обводки.
        strokeOpacity: 0.8,
        // Ширина обводки в пикселях.
        strokeWidth: 2
    });

    let company = new ymaps.Placemark([55.761574, 37.593856], {
      hintContent: '',
      balloonContent: '',
      iconContent: ''
    }, {
      // Опции.
      // Необходимо указать данный тип макета.
      iconLayout: 'default#imageWithContent',
      // Своё изображение иконки метки.
      iconImageHref: companyLogo,
      // Размеры метки.
      iconImageSize: [48, 48],
      // Смещение левого верхнего угла иконки относительно
      // её "ножки" (точки привязки).
      iconImageOffset: [-24, -24],
      // Смещение слоя с содержимым относительно слоя с картинкой.
      iconContentOffset: [15, 15],
      // Макет содержимого.
      iconContentLayout: MyIconContentLayout
    });

    let p1 = new ymaps.Placemark([55.761574, 37.573856], {
      hintContent: '',
      balloonContent: '',
      iconContent: ''
    }, {
      // Опции.
      // Необходимо указать данный тип макета.
      iconLayout: 'default#imageWithContent',
      // Своё изображение иконки метки.
      iconImageHref: pharmacyLogo,
      // Размеры метки.
      iconImageSize: [48, 48],
      // Смещение левого верхнего угла иконки относительно
      // её "ножки" (точки привязки).
      iconImageOffset: [-24, -24],
      // Смещение слоя с содержимым относительно слоя с картинкой.
      iconContentOffset: [15, 15],
      // Макет содержимого.
      iconContentLayout: MyIconContentLayout
    });

    myMap.geoObjects.add(myCircle);
    myMap.geoObjects.add(myCircle2);
    myMap.geoObjects.add(myCircle3);
    myMap.geoObjects.add(company);
    myMap.geoObjects.add(p1);

    console.log(companyLogo)
    console.log(pharmacyLogo)
  }


  advSlider.onmousedown = function(event) {
    console.log(event.pageX);




    moveAt(event.pageX, event.pageY);

    // передвинуть мяч под координаты курсора
    // и сдвинуть на половину ширины/высоты для центрирования
    function moveAt(pageX, pageY) {
      var imageSlider = advSlider.querySelector('.slider-item.current');
//      console.log(imageSlider);
//      ball.style.left = pageX - ball.offsetWidth / 2 + 'px';
//      ball.style.top = pageY - ball.offsetHeight / 2 + 'px';
    }

    function onMouseMove(event) {
      moveAt(event.pageX, event.pageY);
    }

    // (3) перемещать по экрану
    document.addEventListener('mousemove', onMouseMove);

    // (4) положить мяч, удалить более ненужные обработчики событий
    // ball.onmouseup = function() {
    //   document.removeEventListener('mousemove', onMouseMove);
    //   advSlider.onmouseup = null;
    // };

  };


    let advantagesCarouselDesc = new Swiper(".advantages-desc-carousel", {
      autoHeight: true,
      pagination: {
        el: ".advantages-desc-pagination",
        type: "fraction",
      },
      grabCursor: true,
      effect: "fade",
      //  creativeEffect: {
      //   prev: {
      //     shadow: false,
      //     translate: ["-20%", 0, -1],
      //     opacity: 0.3,
      //   },
      //   next: {
      //     translate: ["100%", 0, 0],
      //   },
      // },
      navigation: {
        nextEl: ".advantages-desc-button-next",
        prevEl: ".advantages-desc-button-prev",
      },
      breakpoints: {
        769: {
          autoHeight: false,
        }
      },
    });

    let advantagesCarouselGallery = new Swiper(".advantages-gallery-carousel", {
      spaceBetween: 40,
      slidesPerView: 1,
      pagination: {
        el: ".advantages-gallery-pagination",
        clickable: true,
      },
      grabCursor: true,
      effect: "creative",
      creativeEffect: {
        prev: {
          shadow: false,
          translate: [0, 0, -400],
        },
        next: {
          translate: ["100%", 0, 0],
        },
      },
      navigation: {
        nextEl: ".advantages-gallery-button-next",
        prevEl: ".advantages-gallery-button-prev",
      },
      breakpoints: {
        769: {
          navigation: false,
          pagination: false,
          slidesPerView: 1.15,
        },
      }
    });

    advantagesCarouselDesc.on('slideChange', (e) => {
      advantagesCarouselGallery.slideTo(e.activeIndex)
    })
    advantagesCarouselGallery.on('slideChange', (e) => {
      advantagesCarouselDesc.slideTo(e.activeIndex)
    })


    const buildingStageCarousel = new Swiper('.slider-stages-carousel', {
      speed: 400,
      slidesPerView: 1,
      spaceBetween: 20,
      breakpointBase: 'container',
      oneWayMovement: false,
      // loop: true,
      navigation: {
        prevEl: '.slider-stages-button-prev',
        nextEl: '.slider-stages-button-next',
      },
      pagination: {
        el: ".slider-stages-pagination",
        clickable: true,
      },
      breakpoints: {
        // when window width is >= 320px
        769: {
          pagination: false,
          slidesPerView: 1.45,
        },
        1441: {
          slidesPerView: 1.58,
          spaceBetween: 40
        }
      }
    });

</script>
</html>